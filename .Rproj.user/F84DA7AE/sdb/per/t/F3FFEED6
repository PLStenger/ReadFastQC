{
    "collab_server" : "",
    "contents" : "##################################################################################################################################################################\n######################################################################### FONCTIONS ####################################################################\n##################################################################################################################################################################\n\n\nFastQCresults <- function(input) {\n\n  # Modified code from the GitHub of Tony Breyal : tonybreyal/Blog-Reference-Functions/R/htmlToText/htmlToText.R\n\n  require(RCurl) # require packages\n  require(XML) # require packages\n\n  file <- function(input) {\n    char.vec <- readLines(input, warn = FALSE)\n    return(paste(char.vec, collapse = \"\"))\n  }\n\n  convert_html_to_text <- function(html) {\n    doc <- htmlParse(html, asText = TRUE)\n    text <- xpathSApply(doc, \"//text()[not(ancestor::script)][not(ancestor::style)][not(ancestor::noscript)][not(ancestor::form)]\", xmlValue)\n    return(text)\n  }\n\nf <- file(input)\na <- convert_html_to_text(f)\n\nresults <- c(a[4], \";\", a[3],\";\", a[28], \";\",a[30],\";\", a[32],\";\", a[34])\n# (a[4] = \"Name\", a[3] = \"Date\", a[28] = \"Total Sequences\", a[30] = \"Sequences flagged as poor quality\",  a[32] = \"Sequence length\",  a[34] = \"%GC\")\nresults <- data.frame(t(unlist(results)))\nnames(results) <- NULL\nrownames(results) <- NULL\nreturn(results)\n\n}\n\n\n# Catch all information for all FastQC files generated by Galaxy and print it in a file (\"FastQCanalysis.csv\")\nFastQCresultsForAll <- function(id){\n  #### By Pierre-Louis Stenger (Pierrelouis.stenger@gmail.com) ####\n  id <- list.files(pattern = \".html\") # Find all the names of files with html extension\n  sink(\"FastQCanalysis.csv\", append=TRUE) # Create csv file to put the informations\n  cat(\"Name\",\";\", \"Date\", \";\",\"Total Sequences\", \";\",\"Sequences flagged as poor quality\", \";\",\"Sequence length\", \";\",\"%GC\", \";\",\"\\n\") # Give a header of this file\n  for(i in id){\n    a <- FastQCresults(i)\n    print(a)\n  }\n  sink()\n  sink()\n  sink()\n\n}\n\n\n# # Test\n# FastQCresultsForAllDesk <- function(id){\n#   id <- list.files(pattern = \".html\")\n#   for(i in id){\n#     a <- FastQCresults(i)\n#     b <- print(a)\n#   }\n#   return(b)\n# }\n\n\n# To catch all the adapter content graph of all FastQC create by Galaxy\nadapter <- function(id){\n  #### By Pierre-Louis Stenger (Pierrelouis.stenger@gmail.com) ####\n  require(grDevices) # require packages\n  require(imager) # require packages\n  pdf(\"Adapters content.pdf\", height=10,width=10) # create the PDF\n  id <- list.files(pattern = \"adapter_content.png\", recursive = TRUE) # catch all the images call \"adapter_content.png\" in all folders\n  nb <- length(list.files(pattern = \"adapter_content.png\", recursive = TRUE)) # find the number of all the images call \"adapter_content.png\" in all folders\n\n  for(i in id){ # create the loop --> for one image (i) in all images (id)...\n    a <- load.image(i) # ... find this image and load it...\n    print(plot(a, main = i)) # ... print it in the pdf\n  }\n   dev.off() # close the pdf\n}\n\n\n\n##################################################################################################################################################################\n##################################################################################################################################################################\n\n# Catch the information for one FastQC file generated by Galaxy\n# FastQCresults(\"HI.4112.002.D710---D501.X18_R2_fastqc.html\")\n\n# Catch all information for all FastQC files generated by Galaxy and print it in a file (\"FastQCanalysis.csv\")\n# FastQCresultsForAll()\n\n# To obtain all adapters content of all FastQC create by Galaxy in one pdf file (\"Adapters content.pdf\")\n# adapter()\n\n##################################################################################################################################################################\n##################################################################################################################################################################\n\n",
    "created" : 1496971717178.000,
    "dirty" : true,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "610939401",
    "id" : "F3FFEED6",
    "lastKnownWriteTime" : 1496971924,
    "last_content_update" : 1496972017998,
    "path" : "N:/RMPF/q - Couleur nacre/Package ImaginR/ReadFastQC/R/FastQC analysis.R",
    "project_path" : "R/FastQC analysis.R",
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}